<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>$=function(query,e){return (e||document).querySelector(query)};
function asciicode8(r1,g1,b1,a1, r2,g2,b2,a2) {//8^3 colorspace
	if(!a1&&!a2)return ['\u0020',                           ];
	if(!a1&& a2)return ['\u2584',49,           38,2,r2,g2,b2];
	if( a1&&!a2)return ['\u2580',38,2,r1,g1,b1,49,          ];
	if( a1&& a2)return ['\u2580',38,2,r1,g1,b1,48,2,r2,g2,b2];
}
function asciicode6(r1,g1,b1,a1, r2,g2,b2,a2) {//6^3 colorspace
	var c1=16+((r1/43|0)*36)+((g1/43|0)*6)+(b1/43|0);
	var c2=16+((r2/43|0)*36)+((g2/43|0)*6)+(b2/43|0);
	if(!a1&&!a2)return ['\u0020',               ];
	if(!a1&& a2)return ['\u2584',49,     38,5,c2];
	if( a1&&!a2)return ['\u2580',38,5,c1,49,    ];
	if( a1&& a2)return ['\u2580',38,5,c1,48,5,c2];
}
function toascii(img,use8b){
	var asciicode=use8b?asciicode8:asciicode6;
	var ascii="",w=img.width*4,d=img.data;
	for(var y=0;y<img.height;y+=2){//skip half lines
		for(var x=0,i=y*img.width*4;x<img.width;x++,i+=4){
			var c=asciicode(d[i],d[i+1],d[i+2],d[i+3],d[w+i],d[w+i+1],d[w+i+2],d[w+i+3]);
			ascii+='\u001b['+c.slice(1).join(';')+'m'+c[0];
		}
		ascii+="\u001b[m\n"
	}
	return ascii;
}
</script>
</head>
<body>
<form style="position:absolute;top:0;right:0;z-index:999" onsubmit="var fr=new FileReader();fr.onload=function(){$('img').src=fr.result;};fr.readAsDataURL($('[type=file]').files[0]);return false;">
	<img   onload="var canvas=document.createElement('canvas');canvas.getContext('2d').drawImage(this,0,0,canvas.width=this.width,canvas.height=this.height);$('textarea').innerHTML=toascii(canvas.getContext('2d').getImageData(0,0,canvas.width,canvas.height),$('[type=checkbox]').checked)" hidden/>
	<input onchange="this.form.onsubmit()" type="file"/>
	<input onchange="this.form.onsubmit()" type="checkbox"/>8bit
</form>
<textarea style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;padding:0;margin:0;font-size:8px;">drop your image on the top right button, ascii will appear here</textarea>
</body></html>
